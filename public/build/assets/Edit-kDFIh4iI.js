import{u as f,j as e,B as u,A as h,y as m,d as R}from"./app-u-ofZZ6a.js";import{u as g,R as k,B as C}from"./useResort-KTgLmqwk.js";import{u as F}from"./useModal-BUQjmk8P.js";import{F as l}from"./index-i-Iw7dng.js";import{I as b}from"./index-nYwPvoM7.js";import{S as N}from"./index-JeR9wzeU.js";import{E as T}from"./EditOutlined-Yq_pTbsf.js";import{D as B}from"./DeleteOutlined-K1bpw7Hj.js";import{M as v}from"./index-B9uZqxi0.js";import{P as D}from"./PlusOutlined-WhjMnFbT.js";import{T as I}from"./Table-Ejjk7NpB.js";import{H as M}from"./HeaderTitle-J2LSBPeM.js";import{T as O}from"./index-aNVPpS-a.js";import{u as w}from"./useHeaderTitle-9_T7uolr.js";import{B as A}from"./Breadcrumb-77zxCF8m.js";import{C as E}from"./Collapse-Zb75v8MJ.js";import"./TextArea-AJevMK0Q.js";import"./CheckOutlined-Puy8mL2v.js";import"./styleChecker-SfSJiJ0K.js";import"./index-SI79NB4s.js";import"./index-TWAqMMJ6.js";import"./index-FzzWffZQ.js";import"./useForceUpdate-qc-dJPq7.js";import"./FileOutlined-jU845wnq.js";function S({form:o,onFinish:t}){const r=f();return e.jsxs(l,{name:"create_resource",labelCol:{md:{span:8}},wrapperCol:{span:16},onFinish:t,form:o,labelAlign:"left",initialValues:{type:"video"},children:[e.jsx(l.Item,{label:r("Resource Name","اسم المحتوى"),name:"title",rules:[{required:!0,max:255}],children:e.jsx(b,{})}),e.jsx(l.Item,{label:r("Resource type","نوع المحتوى"),name:"type",rules:[{required:!0}],children:e.jsx(N,{style:{width:120},options:[{value:"file",label:"File"},{value:"video",label:"Video"}]})}),e.jsx(l.Item,{className:"flex justify-center mb-0",children:e.jsx(u,{type:"primary",htmlType:"submit",children:r("Create","إنشاء")})})]})}function _({block:o}){const{modal:t}=h.useApp(),r=o.resources?o.resources.map(a=>({key:a.id,...a})):[],s=f(),p=[{title:s("Resource Name","اسم المحتوى"),dataIndex:"title",key:"title"},{title:s("Manage","إدارة"),key:"manage",render:(a,i)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{type:"primary",icon:e.jsx(T,{}),onClick:()=>{m.get(route("resources.edit",i.id))},children:s("Manage","إدارة")}),e.jsx(u,{type:"primary",danger:!0,icon:e.jsx(B,{}),onClick:()=>{t.confirm({title:s("Are you sure?","هل أنت متأكد؟"),content:s("Do you want to delete this resource?","هل تريد حذف هذا المحتوى؟"),onOk(){m.delete(route("resources.destroy",i.id))},onCancel(){},okText:s("Yes","نعم"),cancelText:s("No","لا")})},children:s("Delete","حذف")})]})}],n=F(),[c]=l.useForm(),x=a=>{m.post(route("resources.store"),{...a,block_id:o.id}),n.closeModal(),c.resetFields()};return e.jsxs("div",{children:[e.jsx(v,{title:s("Create New Resource","إنشاء محتوى جديد"),...n,footer:null,children:e.jsx(S,{form:c,onFinish:x})}),e.jsx(u,{type:"primary",icon:e.jsx(D,{}),className:"float-end mb-4",onClick:()=>{n.showModal()},children:s("Create New Resource","إنشاء محتوى جديد")}),e.jsx(I,{className:"shadow",dataSource:r,columns:p,pagination:!1})]})}function H({title:o,children:t}){return e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-6 my-4",children:[e.jsx(O.Title,{level:5,className:"!mt-0",children:o}),t]})}function me({courseTitle:o,block:t}){const r=f(),[s]=l.useForm(),p=i=>{m.put(route("blocks.update",{id:t.id}),i)},n=i=>{const d=i.map((j,y)=>({id:j.key,sort_order:y}));m.post(route("blocks.updateResourcesOrder"),{resources:d})},[c,x]=g(t.resources,i=>i.map(d=>({key:d.id,title:d.title}))),a=[{key:"2",label:r("Block Content","محتوى البلوك"),children:e.jsx(_,{block:t})},{key:"3",label:r("Block Content Ordering","ترتيب محتوى البلوك"),children:e.jsx(k,{gData:c,onFinish:n,setGData:x})}];return w(e.jsx(M,{title:r("Courses","الكورسات")})),e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mb-6",items:[{title:r("Edit Block","تعديل البلوك")},{title:e.jsx(R,{href:route("courses.edit",t.course_id),children:o})},{title:t.title}]}),e.jsx(H,{title:r("Edit Block Details","تعديل البلوك"),children:e.jsx(C,{form:s,onFinish:p,initialValues:t})}),e.jsx(E,{items:a,defaultActiveKey:["2"]})]})}export{me as default};
