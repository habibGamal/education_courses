import{A as h,u,j as t,B as p,y as a}from"./app-ROvF5bcD.js";import{u as j}from"./useModal-TxVjbRl8.js";import{B as b,u as y,R as C}from"./useResort-4QuEItY9.js";import{F as f}from"./index-W6NZO4K1.js";import{M as g}from"./index-OH9c3Oij.js";import{T as B}from"./Table-Gx0mQlvZ.js";import{E as F}from"./EditOutlined-IUsSaNij.js";import{D}from"./DeleteOutlined-8QVuOfP0.js";import{P as O}from"./PlusOutlined-Rntwku9b.js";import{C as M}from"./CourseForm-AHo4OA-r.js";import{H as N}from"./HeaderTitle-b9y9x18f.js";import{u as T}from"./useHeaderTitle-k-wh1c6d.js";import{B as w}from"./Breadcrumb-qUgfNODP.js";import{C as A}from"./Collapse-tBdpzdqj.js";import"./index-NgIUlJ99.js";import"./TextArea-pf1Q8qAZ.js";import"./styleChecker-kZfa9gQd.js";import"./index-jMBvmDIv.js";import"./CheckOutlined-15dYBcDI.js";import"./index-Bc1AAeSu.js";import"./index-bW-R7lYg.js";import"./index-0WyA4Kw6.js";import"./useForceUpdate-pAwHZwMX.js";import"./FileOutlined-KJfL1Usd.js";import"./FileUpload-s4iGs_NC.js";import"./imagePathResolver-yDEFMubq.js";import"./useFormErrors-J54mLjAH.js";function E({course:r}){const{modal:i}=h.useApp(),m=r.blocks?r.blocks.map(e=>({key:e.id,...e})):[],o=u(),c=[{title:o("Block Name","اسم البلوك"),dataIndex:"title",key:"title"},{title:o("Manage","إدارة"),key:"manage",render:(e,s)=>t.jsxs("div",{className:"flex gap-4",children:[t.jsx(p,{type:"primary",icon:t.jsx(F,{}),onClick:()=>{a.get(route("blocks.edit",s.id))},children:o("Manage","إدارة")}),t.jsx(p,{type:"primary",danger:!0,icon:t.jsx(D,{}),onClick:()=>{i.confirm({title:o("Are you sure?","هل أنت متأكد؟"),content:o("Do you want to delete this block?","هل تريد حذف هذا البلوك؟"),onOk(){a.delete(route("blocks.destroy",s.id))},onCancel(){},okText:o("Yes","نعم"),cancelText:o("No","لا")})},children:o("Delete","حذف")})]})}],l=j(),[n]=f.useForm(),d=e=>{a.post(route("blocks.store"),{...e,course_id:r.id}),l.closeModal(),n.resetFields()};return t.jsxs("div",{children:[t.jsx(g,{title:o("Create New Block","إنشاء بلوك جديد"),...l,footer:null,children:t.jsx(b,{form:n,onFinish:d})}),t.jsx(p,{type:"primary",icon:t.jsx(O,{}),className:"float-end mb-4",onClick:()=>{l.showModal()},children:o("Create New Block","إنشاء بلوك جديد")}),t.jsx(B,{className:"shadow",dataSource:m,columns:c,pagination:!1})]})}function lt({course:r}){const i=u(),[m]=f.useForm(),o=e=>{var s;(s=e.thumbnail)!=null&&s.file?e.thumbnail=e.thumbnail.file.originFileObj:delete e.thumbnail,console.log(e),a.post(route("courses.update",{id:r.id}),{...e,_method:"put"},{forceFormData:!0})},c=e=>{const s=e.map((k,x)=>({id:k.key,sort_order:x}));a.post(route("courses.updateBlocksOrder"),{blocks:s})},[l,n]=y(r.blocks,e=>e.map(s=>({key:s.id,title:s.title}))),d=[{key:"1",label:i("Course Details","تفاصيل الكورس"),children:t.jsx(M,{form:m,onFinish:o,initialValues:r})},{key:"2",label:i("Course Content","محتوى الكورس"),children:t.jsx(E,{course:r})},{key:"3",label:i("Course Content Ordering","ترتيب محتوى الكورس"),children:t.jsx(C,{gData:l,onFinish:c,setGData:n})}];return T(t.jsx(N,{title:i("Courses","الكورسات")})),t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"mb-6",items:[{title:i("Edit Course","تعديل الكورس")},{title:r.title}]}),t.jsx(A,{items:d,defaultActiveKey:["2"]})]})}export{lt as default};
